<!DOCTYPE html>
<html>
<head>
  <title>Contact - Wanderlust Travel Guide</title>
  <link rel="stylesheet" href="mystyle.css">
</head>
<body>
  <header>
    <center>
      <h1 style="color:#DFFF00; background: linear-gradient(to right,#33ccff 0%, #cc00ff 100%);">
        WANDERLUST TRAVEL GUIDE
      </h1>
    </center>
    <nav>
      <ul>
        <li><a href="homepage.html">Home</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="dest.html">Destinations</a></li>
        <li><a href="fooddrink.html">Food & Drink</a></li>
        <li><a href="accommodation.html">Accommodation</a></li>
         <li><a href="accommodationtips.html">Tips for Accommodation</a></li>
          <li><a href="favourites.html">Favourites</a></li>
           <li><a href="contactandhelp.html">Contact</a></li>
          <li><a href="submissions.html">Submissions</a></li> 
      </ul>
    </nav>
  </header>

  <section id="contact">
    <h2 style="color: yellow;">Contact Us</h2>
    <p>If you need help or have any questions, don’t hesitate to contact our support team. Whether it’s for travel guidance, technical issues, or general feedback, we’re here to assist you with dedication and promptness.</p>
  </section>

  <section class="content">
    <form id="contactForm" novalidate>
      <input type="text" 
      name="name"
      placeholder="Your Name"
      required
      pattern=".{2,}"
      title="Please enter at least 2 characters.">
      <br><br>
      <input type="email" 
      name="email"
       placeholder="Your Email" 
       required
       pattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$"
       title="Please enter a valid email address."
       ><br><br>
      <textarea name="message" 
      placeholder="Your Message"
       required 
       minlength="10"
       title="Please enter at least 10 characters"
       rows="5" 
       cols="40"
       ></textarea><br><br>
      <button type="submit">Send Message</button>
    </form>
   <div id="toastMsg" class="toast success-toast">Thank you for contacting us!</div>
  <div id="formErrors" style="color: red;margin-top: 1em;"></div>
  </section>

  <footer>
    <p>&copy; 2023 Wanderlust Travel Guide. All rights reserved.</p>
  </footer>

<script>
document.getElementById('contactForm').addEventListener('submit', async (e) => {
  e.preventDefault();

  const form = e.target;
  const errorsDiv = document.getElementById('formErrors');
  errorsDiv.textContent = '';

  if (!form.checkValidity()) {
    form.reportValidity();
    return;
  }

  const formData = {
    name: form.name.value.trim(),
    email: form.email.value.trim(),
    message: form.message.value.trim(),
  };

  try {
    const res = await fetch('http://localhost:3000/contact', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(formData),
    });

    const result = await res.json();

    if (!res.ok) {
      if (result.errors) {
        errorsDiv.innerHTML = result.errors.join('<br>');
      } else {
        errorsDiv.textContent = result.message || 'Submission failed.';
      }
      return;
    }

    // ✅ Show toast
    showToast(result.message);
    form.reset();

  } catch (err) {
    console.error('Error submitting form:', err);
    alert('Something went wrong. Please try again.');
  }
});

// ✅ Toast show function
function showToast(message) {
  const toast = document.getElementById('toastMsg');
  toast.textContent = "✅ " + message;
  toast.classList.add("show");

  setTimeout(() => {
    toast.classList.remove("show");
  }, 5000);
}
</script>


</body>
</html>
